// Библиотеки

#include <iostream> // Библия для работы с вводом/выводом
#include <math.h> // Матан
#include <windows.h> // Системная библия
#include <ctime> // Библиотека времени
using namespace std; // Используемое пространство имен

int main()
{
    HANDLE out_handle = GetStdHandle(STD_OUTPUT_HANDLE);
    COORD crd = { 50, 50 }; // Устанавливаю свой размер окна
    SMALL_RECT src = { 0, 0, crd.X - 1, crd.Y - 1 }; // Убиваю полосы прокрутки
    SetConsoleWindowInfo(out_handle, true, &src);
    SetConsoleScreenBufferSize(out_handle, crd);
    setlocale(LC_ALL, "rus"); // Локализация
    int n=0, n0, c1, c2, c3, r, sum=0, m=0; // Переменные
    const int size = 999; // Константа, максимальный размер массива
    
    srand(time(NULL)); // Фикс одинаковых значений рандома
    int arr[size]{}; // Непосредственно массив

    cout << "Выберите необходимый метод ввода значений элементов массива:\n\n1: Я сам(а)\n2: Рандом\n" << endl;
    cin >> c1;

    switch (c1) // Выбор способа ввода значений
    {
    case 1:
    {
        cout << "\nВыберите необходимый метод задания размера массива:\n\n1: Я сам(а)\n2: Рандом\n" << endl;
        cin >> c2;

        switch (c2) // Выбор способа задания размера массива
        {
        case 1:
        {
            cout << "\nВводите размер массива (макс 999):\n" << endl;
            cin >> n;
            cout << "\nВводите значения элементов массива:\n" << endl;

            for (int i = 0; i < n; i++)
            {
                cin >> arr[i];
            }
            break;
        }
        case 2:
        {
            cout << "\nВводите диапазон для размера массива (макс 999):\n" << endl;
            cin >> n0;
            cout << "\nВводите значения элементов массива:\n" << endl;

            n = rand() % n0;

            while (n == 0)
            {
                n = rand() % n0;
            }
           
            for (int i = 0; i < n; i++)
            {
                cin >> arr[i];
            }
            break;
        }
        default:
            cout << "\nНе понял" << endl;
            break;
        }
        break;
    }
    case 2:
    {
        cout << "\nВыберите необходимый метод задания размера массива:\n\n1: Я сам(а)\n2: Рандом\n" << endl;
        cin >> c3;

        switch (c3) // Выбор способа задания размера массива
        {
        case 1:
        {
            cout << "\nВводите размер массива (макс 999):\n" << endl;
            cin >> n;
            cout << "\nВводите диапазон для значений чисел (будет от -n/2 до n/2):\n" << endl;
            cin >> r;

            for (int i = 0; i < n; i++)
            {
                arr[i] = rand() % r - (r / 2);
            }
            break;
        }
        case 2:
        {
            cout << "\nВводите диапазон для размера массива (макс 999):\n" << endl;
            cin >> n0;
            cout << "\nВводите диапазон для значений чисел (будет от -n/2 до n/2):\n" << endl;
            cin >> r;

            n = rand() % n0;

            while (n == 0)
            {
                n = rand() % n0;
            }

            for (int i = 0; i < n; i++)
            {
                arr[i] = rand() % r - (r/2);
            }
            break;
        }
        default:
            cout << "\nНе понял" << endl;
            break;
        }
        break;
    }
    default:
        cout << "\nНе понял" << endl;
        break;
    }

    cout << "\n---------------------------------------------------------------------------------------------------------------\n" << endl;
    cout << "Размер массива = " << n << endl;
    cout << "\nМАССИВ:" << endl;
    cout << "\n---------------------------------------------------------------------------------------------------------------\n" << endl;
    int v = n;

    for (int k = 0; k < v; k++) // Цикл для вывода значений (элементов) массива
    {
        cout << arr[k] << "\t";

        if (m == 0)
        {
            if (arr[k] > 0) // 2 условия, чтобы найти первое положительное
            {
                int k0 = k + 1;
                for (k0; k0 <= v; k0++) // Цикл для подсчета суммы
                {
                    sum = sum + arr[k0];
                }
                m = 1;
            }    
        }
    }

    cout << "\n\n---------------------------------------------------------------------------------------------------------------" << endl;
    cout << "Сумма = " << sum << endl;
    cout << "---------------------------------------------------------------------------------------------------------------\n" << endl;

    system("pause");
    return 0;
}